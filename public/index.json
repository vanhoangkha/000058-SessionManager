[
{
	"uri": "/3-accessibilitytoinstances/3.1-public-instance/",
	"title": "Create connection to EC2 Public instance",
	"tags": [],
	"description": "",
	"content": "The steps will be as follows:   Create the Linux instance and attach the IAM Role SSM to it.\n  Check the Security group of the Linux instance. Ensure that outbound allows All Traffice tới 0.0.0.0/0 and no need to inbound.\n  After creating the public instance, go to AWS System Manager -\u0026gt; select Session Manager and Start Session.\n  Then select the instance and click Start session to access the instance\n  Terminal will appear in the browser. Test with the command sudo tcpdump -nn port 22 và sudo tcpdump we will see the result no SSH traffic but outboud HTTPS.\n  Above, we have created a connection to the public instance without opening SSH port 22, for better security, avoiding any attack to the SSH port.\nOne drawback of the above method is that we have to open the Security Group outbound at port 443 to the internet. Since it\u0026rsquo;s a public instance, it probably won\u0026rsquo;t be a problem, but if you want even more security, you can block port 443 to the internet and still use the Session Manager. How to do this I will demonstrate in the private instance section below.\n\r"
},
{
	"uri": "/1-introduce/",
	"title": "Introduction",
	"tags": [],
	"description": "",
	"content": "Session Manager is a function within the AWS System Manager service, SSM provides verifiable and secure version management without opening incoming ports, without Bastion Host or SSH key management**. Session Manager also makes it easy to comply with corporate policies that require controlled access to instances, strict security practices, and fully auditable logs with instance access details, while still providing end-users with one-click cross-platform access to your managed instances.\nBy using Session Manager, you get the following advantages that traditional methods do not have:\n No need to open port 22 for SSH protocol, so it is more secure. Can be configured so that the connection does not need to go outside the internet, so it is more secure. No need to manage the server\u0026rsquo;s private key to connect to SSH. Centralized management of users using AWS IAM. Access to the server easily and simply with one click. Faster access time than traditional methods like SSH Support many different operating systems such as Linux, Windows, MacOS Log the connection sessions and commands executed while connecting to the server.  With the above advantages, you can use Session Manager instead of using Bastion host technique to save us time and money when managing Bastion server.\n"
},
{
	"uri": "/",
	"title": "Session Management",
	"tags": [],
	"description": "",
	"content": "Work with Amazon SSM (Session Management) Overall In this lab, you\u0026rsquo;ll learn the basics and practice of Amazon SSM (Session Management). Perform creating public and private instance connections.\nContent  Introduction  Prerequistes Create connection to EC2 instance Session Management - Port Forwarding  "
},
{
	"uri": "/3-accessibilitytoinstances/3.2-private-instance/",
	"title": "Create connection to EC2 Private instance ",
	"tags": [],
	"description": "",
	"content": "For Windows instance located in private subnet, there is no public IP, no internet gateway so cannot go out internet.\nWith this type of instance, the traditional way is to use Bastion host technique which takes a lot of money and effort, but here we will use Session Manager with this type.\nBasically, the private instance still has to open the TCP 443 port to System Manager, but don\u0026rsquo;t let that connection go out to the internet, but only in its own VPC, so make sure be security problem.\nTo do that, we must include the System Manager endpoint in the VPC, that is, using the VPC interface endpoint. VPC interface endpoint is attached to the subnet, so this method can be done not only with private subnet but also with public subnet, which means that with public subnet, you completely can not let TCP 443 go out to the internet.\nContent:  Create VPC Endpoint Create Private Instance  Create VPC Endpoint  We will create 4 interface endpoints and 1 gateway endpoint:  Interface endpoint:  com.amazonaws.region.ssm com.amazonaws.region.ec2messages com.amazonaws.region.ec2 com.amazonaws.region.ssmmessages   Gateway endpoint:  com.amazonaws.region.s3     Access to VPC console, choose Endpoint, then select Create Endpoint  For Service catelogy choose: AWS services For Service Name choose: SSM  For Subnet, choose subnet containing Windows instance Check Enable DNS name  For Security Group, choose the Security group of the private subnet we created. For Policy, chọn Full access  We have created VPC Interface Endpoint for SSM, we need to create 3 more VPC Interface Endpoints for ssmmessages, ec2, ec2messages and VPC Gateway Endpoint services for SSM. S3 with the same method as above.   Create Private Instance   We will create a Windows instance located in private subnet with connection to VPC Endpoint just created above, without public IP, choose *IAM Role * created for the SSM service.   Check the Security group of the Windows instance. Ensure that outbound allows All Traffice tới 172.31.0.0/16 and no need to inbound.   When created the Windows instance, go back to System Manager console, choose the Session Manager or Fleet Manager tab and see the private instance appears as successful.   We will try connecting to Windows instance by Fleet Manager   "
},
{
	"uri": "/2-prerequiste/",
	"title": "Prerequistes",
	"tags": [],
	"description": "",
	"content": "\rYou need to create 1 Linux instance on the public subnet and 1 Windows instance on the private subnet to perform this lab.\n\rTo use System Manager to manage our window instance in particular and our instances in general on AWS, we need to give System Manager permission to access your instance.\nContent  Create IAM Role Create security group for public subnet Create security group for private subnet Create security group for VPC Endpoint  Create IAM Role 2.1. Sign in to the AWS Console at https://aws.amazon.com/console/\n2.2. Navigate to the IAM console.\n2.3. In the left navigation pane, select Roles.\n2.4. Choose Create role.\n2.5. Choose AWS service and select EC2. Then select Next: Permissions\n2.6. Find AmazonSSMManagedInstanceCore and select it. Then select Next: Tags. 2.7. (Optional) You can add tags to the role.\n2.8. Click Next: Review.\n2.9. Name the Role at Role Name. Then select Create Role. Create security group for public subnet  Create a security group for the public instance:  No need to inbound Outbound : allow All Traffic to 0.0.0.0/0    Create security group for private subnet  Create a security group for the private instance:  No need to inbound Outbound : allow TCP 443 to 172.31.0.0/16 (my VPC CIDR)    Create security group for VPC Endpoint  Create security group for VPC Endpoint:  Inbound: allow TCP 443 to 172.31.0.0/16 (my VPC CIDR) No need to outbound    "
},
{
	"uri": "/3-accessibilitytoinstances/",
	"title": "Create connection to EC2 instance",
	"tags": [],
	"description": "",
	"content": "We will make a connection to the EC2 Public instance, the EC2 Private instance and create S3 to monitor the session log:\nContent 3.1. Create connection to EC2 Public instance\n3.2. Create connection to EC2 Private instance\n3.3. Create S3 Bucket to track session logs\n"
},
{
	"uri": "/3-accessibilitytoinstances/3.3-s3forlog/",
	"title": "Create S3 Bucket to track session logs",
	"tags": [],
	"description": "",
	"content": "\rWe will configure S3 (Simple Storage Service) to monitor session logs.\n\rContent:  Attach AmazonS3FullAccess policy to IAM Role SSM Create S3 Bucket Check Session logs in S3  Attach AmazonS3FullAccess policy to IAM Role SSM  Back to IAM Role SSM console  Choose Attach Policies  Then, type AmazonS3FullAccess into the search bar and choose AmazonS3FullAccess  Finally, click Attach Policy   Create S3 Bucket  Go to S3 console, chooose Buckets tab, then select Create Bucket  For Bucket name: enter your bucket name. For AWS Region: choose Region you are handing this lab Uncheck Block all public access for the sake of lab simplicity. In realistic, please consider security matter.  Back to Session Manager console, choose Preferences tab and click on Edit.  For Send session logs to S3: click Enable And choose S3 bucket name just created.   Check Session logs in S3  We will reconnect Linux instance and execute some simple commands. Then return to the S3 interface to view logs.  Click on file.log then select Download  We wil see sesion logs by Notepad   "
},
{
	"uri": "/4-portfwd/",
	"title": "Port Forwarding",
	"tags": [],
	"description": "",
	"content": "\rPort Forwarding is a useful way to redirect network traffic from one IP address and port number combination to another. With port forwarding, you can access an EC2 instance located in a private subnet from your workstation.\n\rWe will configure Port Forwarding for RDP connection between our machine with Windows instance placed in private instance created in step 2.2.\n To do this part, ensure your computer has been installed AWS CLI and Seession Manager Plugin Run the command below on your computer to configure port forwarding aws ssm start-session --target (your ID windows instance) --document-name AWS-StartPortForwardingSession --parameters portNumber=\u0026quot;3389\u0026quot;,localPortNumber=\u0026quot;9999\u0026quot; --region (your region)    Connect to Windows instance by Remote Desktop on your machine.   Back to Session manager console, select Session history tab, we will see session logs with document name AWS-StartPortForwardingSession   "
},
{
	"uri": "/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]